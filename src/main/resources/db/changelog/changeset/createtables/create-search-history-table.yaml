databaseChangeLog:
  - changeSet:
      id: create_search_history_table
      author: Oleh
      changes:
        - createTable:
            tableName: search_history
            columns:
              - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    primaryKey: true
              - column:
                  name: transport_type_id
                  type: BIGINT
              - column:
                  name: brand_id
                  type: JSONB
              - column:
                  name: model_id
                  type: JSONB
              - column:
                  name: region_id
                  type: JSONB
              - column:
                  name: city_id
                  type: JSONB
              - column:
                  name: body_type_id
                  type: JSONB
              - column:
                  name: fuel_type_id
                  type: JSONB
              - column:
                  name: drive_type_id
                  type: JSONB
              - column:
                  name: transmission_id
                  type: JSONB
              - column:
                  name: color_id
                  type: JSONB
              - column:
                  name: condition_id
                  type: JSONB
              - column:
                  name: number_axles_id
                  type: JSONB
              - column:
                  name: producing_country_id
                  type: JSONB
              - column:
                  name: wheel_configuration_id
                  type: JSONB
              - column:
                  name: price_from
                  type: DECIMAL(19, 2)
              - column:
                  name: price_to
                  type: DECIMAL(19, 2)
              - column:
                  name: years_from
                  type: INTEGER
              - column:
                  name: years_to
                  type: INTEGER
              - column:
                  name: mileage_from
                  type: INTEGER
              - column:
                  name: mileage_to
                  type: INTEGER
              - column:
                  name: engine_power_from
                  type: INTEGER
              - column:
                  name: engine_power_to
                  type: INTEGER
              - column:
                  name: engine_displacement_from
                  type: DOUBLE
              - column:
                  name: engine_displacement_to
                  type: DOUBLE
              - column:
                  name: number_of_doors_from
                  type: INTEGER
              - column:
                  name: number_of_doors_to
                  type: INTEGER
              - column:
                  name: number_of_seats_from
                  type: INTEGER
              - column:
                  name: number_of_seats_to
                  type: INTEGER
              - column:
                  name: load_capacity_from
                  type: INTEGER
              - column:
                  name: load_capacity_to
                  type: INTEGER
              - column:
                  name: trade
                  type: BOOLEAN
              - column:
                  name: military
                  type: BOOLEAN
              - column:
                  name: uncleared
                  type: BOOLEAN
              - column:
                  name: bargain
                  type: BOOLEAN
              - column:
                  name: installment_payment
                  type: BOOLEAN
              - column:
                  name: order_by
                  type: VARCHAR(255)
              - column:
                  name: sort_by
                  type: VARCHAR(255)
              - column:
                  name: created
                  type: TIMESTAMP(6)
              - column:
                  name: last_update
                  type: TIMESTAMP(6)

        - createTable:
            tableName: user_search_history
            columns:
              - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    primaryKey: true
              - column:
                  name: user_id
                  type: BIGINT
                  constraints:
                    foreignKeyName: FK_user_search_history_user
                    references: users(id)
              - column:
                  name: search_history_id
                  type: BIGINT
                  constraints:
                    foreignKeyName: FK_user_search_history_search_history_new
                    references: search_history(id)